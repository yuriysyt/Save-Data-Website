<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data for {player_name}</title>
    <link rel="stylesheet" href="/static/style.css">

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const eventSource = new EventSource('/events');
        
            eventSource.onmessage = function(event) {
                const data = JSON.parse(event.data);
                const table = document.querySelector('.data-table');
                const newRow = table.insertRow();
                newRow.innerHTML = `
                    <td>${data.player_name}</td>
                    <td>${data.dialog_text}</td>
                    <td>${data.timestamp}</td>
                `;
            };
        
            eventSource.onerror = function(event) {
                console.error("SSE error:", event);
            };
        });
        </script>
        
</head>
<body>
    <div class="container">
        <h1>Data for {player_name}</h1>
        <nav>
            <a href="/player/{player_name}?data_type=all" class="{ 'active' if data_type == 'all' else 'inactive' }">All</a>
            <a href="/player/{player_name}?data_type=dialog" class="{ 'active' if data_type == 'dialog' else 'inactive' }">Dialog</a>
            <a href="/player/{player_name}?data_type=input" class="{ 'active' if data_type == 'input' else 'inactive' }">Input</a>
            <a href="/player/{player_name}?data_type=chat" class="{ 'active' if data_type == 'chat' else 'inactive' }">Chat</a>
            <a href="/player/{player_name}?data_type=command" class="{ 'active' if data_type == 'command' else 'inactive' }">Command</a>
        </nav>
        <table class="data-table">
            <tr>
                <th>Player Name</th>
                <th>Dialog Text</th>
                <th>Data Type</th>
                <th>Timestamp</th>
            </tr>
            {player_data_html}
        </table>
        <footer>
            <a href="/">Back to Home</a>
        </footer>
    </div>
</body>
</html>
